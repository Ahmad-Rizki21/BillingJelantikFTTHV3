import{d as Ze,r as u,c as xe,o as he,a as V,p as ea,b as z,w as t,e as d,f as l,g as a,h as n,t as p,j as y,i as C,F as we,k as Ve,l as v,_ as aa}from"./index-DDZ3D2Zd.js";import{d as la}from"./debounce-BMmXVQ06.js";const ta={class:"header-card mb-4 mb-md-6"},sa={class:"d-flex flex-column align-center gap-4"},na={class:"d-flex align-center header-info"},oa={class:"header-avatar-wrapper"},ia={class:"action-buttons-container"},da={class:"pa-4"},ra={class:"d-flex flex-column flex-sm-row gap-3 mb-3"},ua={class:"card-header"},ma={class:"d-flex align-center"},pa={class:"header-icon-wrapper"},va={key:0,class:"selection-toolbar"},fa={class:"font-weight-bold text-primary"},ga={class:"d-block d-md-none"},ca={key:0,class:"text-center py-12"},_a={key:1,class:"no-data-wrapper"},ba={key:2,class:"mobile-cards-container"},ka={class:"d-flex align-center mb-3"},ya={class:"flex-grow-1"},xa={class:"mobile-customer-name"},wa={class:"mobile-customer-email text-medium-emphasis"},Va={class:"mobile-details"},za={class:"detail-row"},Ca={class:"detail-value"},Ta={class:"detail-row"},Pa={class:"detail-value"},Ua={key:0,class:"detail-row"},Da={class:"detail-value"},Ia={class:"detail-row"},Aa={class:"detail-value"},$a={class:"detail-row"},Ba={class:"detail-value"},Sa={class:"detail-row"},La={class:"detail-value"},Na={class:"detail-row"},qa={class:"detail-row"},Ma={class:"detail-value"},Ga={class:"d-flex gap-2 mt-4"},Ka={key:0,class:"text-center pa-4"},Ea={class:"d-none d-md-block table-container"},Fa={class:"d-flex justify-center align-center py-12"},Ra={class:"text-center"},ja={class:"customer-info"},Oa={class:"customer-name"},Ha={class:"date-cell"},Ja={class:"action-buttons"},Wa={class:"no-data-wrapper"},Ya={class:"form-header"},Qa={class:"form-header-content"},Xa={class:"form-title"},Za={class:"input-group"},ha={class:"input-label"},el={class:"input-group"},al={class:"input-label"},ll={class:"input-group"},tl={class:"input-label"},sl={class:"input-group"},nl={class:"input-label"},ol={class:"input-group"},il={class:"input-label"},dl={class:"input-group"},rl={class:"input-label"},ul={class:"input-group"},ml={class:"input-label"},pl={class:"input-group"},vl={class:"input-label"},fl={class:"input-group"},gl={class:"input-label"},cl={class:"input-group"},_l={class:"input-label"},bl={class:"input-group"},kl={class:"input-label"},yl={class:"delete-header"},xl={class:"delete-message"},wl={class:"delete-text"},Vl={class:"customer-name-delete"},zl={class:"delete-header"},Cl={class:"delete-message"},Tl={class:"delete-text"},Pl={class:"import-header"},Ul={class:"d-flex flex-column flex-sm-row align-center gap-4"},Dl={class:"template-icon"},Il={class:"mb-4"},Al={class:"text-h6 mb-3 d-flex align-center upload-title"},$l={key:0,class:"mt-4"},Bl={class:"d-flex justify-space-between align-center"},Sl={class:"error-list"},Ll={class:"text-body-2"},Nl={class:"d-flex align-center"},re=15,ql=Ze({__name:"PelangganView",setup(Ml){const T=u([]),Z=u([]),E=u(!0),h=u(!1),$=u(!1),F=u(!1),R=u(!1),q=u(!1),j=u(-1),x=u(1),O=u(!1),_=u([]),H=u(!1),J=u(!1),ee=u(!1),ae=u(!1),P=u([]),b=u([]),B=u(""),S=u(null),L=u(null),le=u(1),te=u(!0),se=u(!1),ne={id:void 0,nama:"",no_ktp:"",email:"",no_telp:"",layanan:"",alamat:"",blok:"",unit:"",tgl_instalasi:new Date().toISOString().split("T")[0],alamat_2:"",id_brand:null},m=u({...ne}),M=u(null),U=u({show:!1,text:"",color:"success"}),ue=u(["Tambun","Rusun Pinus Elok","Luar Pinus Elok","Rusun Pulogebang","Rusun Cakung KM2","Rusun Tipar Cakung","Rusun Albo","Rusun Nagrak","Waringin","Parama"]),ze=u(["Internet 10 Mbps","Internet 20 Mbps","Internet 30 Mbps","Internet 50 Mbps"]),k={required:o=>!!o||"Field ini wajib diisi",email:o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||"Format email tidak valid",phone:o=>/^[\+]?[0-9\s\-\(\)]{10,}$/.test(o)||"Format nomor telepon tidak valid",ktp:o=>o&&o.length===16&&/^[0-9]+$/.test(o)||"Nomor KTP harus 16 digit angka"},Ce=[{title:"Pelanggan",key:"nama",sortable:!0,minWidth:"160px"},{title:"No. KTP",key:"no_ktp",sortable:!0},{title:"Email",key:"email",sortable:!0},{title:"Alamat",key:"alamat",sortable:!1},{title:"Alamat Tambahan",key:"alamat_2",sortable:!1},{title:"Blok",key:"blok",sortable:!1},{title:"Unit",key:"unit",sortable:!1},{title:"No. Telepon",key:"no_telp",sortable:!1},{title:"Layanan",key:"layanan",sortable:!1},{title:"Brand",key:"id_brand",sortable:!0},{title:"Tgl Instalasi",key:"tgl_instalasi",align:"center",sortable:!0},{title:"Aksi",key:"actions",sortable:!1,align:"center",width:"120px"}],Te=xe(()=>j.value===-1?"Tambah Pelanggan Baru":"Edit Pelanggan"),Pe=xe(()=>T.value.length===0?[]:T.value);he(()=>{D(),Se()});function Ue(){if(_.value.length===0){f("Tidak ada pelanggan yang dipilih.","warning");return}q.value=!0}async function De(){const o=[..._.value];$.value=!0;try{const e=o.map(i=>V.delete(`/pelanggan/${i.id}`));await Promise.all(e),f(`${o.length} pelanggan berhasil dihapus.`,"success"),await D(),_.value=[]}catch(e){console.error("Gagal melakukan hapus massal:",e),f("Terjadi kesalahan saat menghapus data.","error")}finally{$.value=!1,q.value=!1}}async function D(o=!1){o?se.value=!0:(E.value=!0,le.value=1,te.value=!0);try{const e=new URLSearchParams;B.value&&e.append("search",B.value),S.value&&e.append("alamat",S.value),L.value&&e.append("id_brand",L.value);const i=(le.value-1)*re;e.append("skip",String(i)),e.append("limit",String(re));const r=(await V.get(`/pelanggan/?${e.toString()}`)).data;o?T.value.push(...r):T.value=r,r.length<re&&(te.value=!1)}catch(e){console.error("Gagal mengambil data pelanggan:",e),f("Gagal mengambil data pelanggan","error")}finally{E.value=!1,se.value=!1}}function Ie(){le.value++,D(!0)}const Ae=la(()=>{D()},500);ea([B,S,L],()=>{Ae()});function $e(){B.value="",S.value=null,L.value=null}function Be(o){b.value=[],Array.isArray(o)?P.value=o:o?P.value=[o]:P.value=[]}async function Se(){try{const o=await V.get("/harga_layanan");Z.value=o.data}catch(o){console.error("Gagal mengambil data harga layanan:",o)}}function G(o){j.value=o?T.value.findIndex(i=>i.id===o.id):-1;const e=o?{...o}:{...ne};e.tgl_instalasi&&(e.tgl_instalasi=new Date(e.tgl_instalasi).toISOString().split("T")[0]),m.value=e,x.value=1,F.value=!0}function oe(){F.value=!1,m.value={...ne},j.value=-1,x.value=1}async function Le(){if(O.value){h.value=!0;try{j.value>-1?(await V.patch(`/pelanggan/${m.value.id}`,m.value),f("Data pelanggan berhasil diperbarui","success")):(await V.post("/pelanggan/",m.value),f("Data pelanggan berhasil ditambahkan","success")),await D(),oe()}catch(o){console.error("Gagal menyimpan data pelanggan:",o),f("Gagal menyimpan data pelanggan","error")}finally{h.value=!1}}}function me(o){M.value=o,R.value=!0}function pe(){R.value=!1,M.value=null}async function Ne(){if(M.value){$.value=!0;try{await V.delete(`/pelanggan/${M.value.id}`),await D(),f("Data pelanggan berhasil dihapus","success"),pe()}catch(o){console.error("Gagal menghapus data pelanggan:",o),f("Gagal menghapus data pelanggan","error")}finally{$.value=!1}}}function ie(){H.value=!1,J.value=!1,P.value=[],b.value=[]}async function qe(){ae.value=!0;try{const o=await V.get("/pelanggan/template/csv",{responseType:"blob"});ve(o.data,"template_import_pelanggan.csv")}catch(o){console.error("Gagal mengunduh template:",o),f("Gagal mengunduh template.","error")}finally{ae.value=!1}}async function Me(){ee.value=!0;try{const o=await V.get("/pelanggan/export/csv",{responseType:"blob"}),e=new Date().toISOString().split("T")[0];ve(o.data,`export_pelanggan_${e}.csv`)}catch(o){console.error("Gagal mengekspor data:",o),f("Tidak ada data untuk diekspor atau terjadi kesalahan.","error")}finally{ee.value=!1}}async function Ge(){const o=P.value[0];if(!o){f("Silakan pilih file CSV terlebih dahulu.","warning");return}J.value=!0,b.value=[];const e=new FormData;e.append("file",o);try{const i=await V.post("/pelanggan/import",e);f(i.data.message,"success"),await D(),ie()}catch(i){if(console.error("Gagal mengimpor data:",i),i.response?.data?.errors)b.value=i.response.data.errors;else if(i.response?.data?.detail){const g=i.response.data.detail;typeof g=="string"?b.value=[g]:b.value=["Terjadi kesalahan yang tidak diketahui."]}else b.value=["Tidak dapat terhubung ke server atau terjadi error."]}finally{J.value=!1}}function ve(o,e){const i=window.URL.createObjectURL(new Blob([o])),g=document.createElement("a");g.href=i,g.setAttribute("download",e),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(i)}function fe(o){return o.includes("JAKINET")?"blue":o.includes("JELANTIK")?"purple":o.includes("JELANTIK NAGRAK")?"emerald":"grey"}function ge(o){if(!o)return"-";const e=new Date(o);if(isNaN(e.getTime()))return"-";const i=e.getTimezoneOffset();return new Date(e.getTime()+i*60*1e3).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})}function f(o,e){U.value={show:!0,text:o,color:e}}return(o,e)=>{const i=d("v-icon"),g=d("v-avatar"),r=d("v-btn"),w=d("v-text-field"),W=d("v-select"),I=d("v-card"),Y=d("v-chip"),N=d("v-spacer"),ce=d("v-expand-transition"),_e=d("v-progress-circular"),Ke=d("v-checkbox"),K=d("v-card-text"),Ee=d("v-data-table"),be=d("v-stepper-item"),de=d("v-divider"),Fe=d("v-stepper-header"),c=d("v-col"),ke=d("v-row"),ye=d("v-stepper-window-item"),Re=d("v-combobox"),je=d("v-stepper-window"),Oe=d("v-stepper"),He=d("v-form"),Q=d("v-card-actions"),X=d("v-dialog"),Je=d("v-sheet"),We=d("v-file-input"),Ye=d("v-alert"),Qe=d("v-snackbar"),Xe=d("v-container");return v(),z(Xe,{fluid:"",class:"pa-4 pa-md-6"},{default:t(()=>[l("div",ta,[l("div",sa,[l("div",na,[l("div",oa,[a(g,{class:"header-avatar",color:"transparent",size:"50"},{default:t(()=>[a(i,{color:"white",size:"28"},{default:t(()=>e[30]||(e[30]=[n("mdi-account-group")])),_:1,__:[30]})]),_:1})]),e[31]||(e[31]=l("div",{class:"ml-4"},[l("h1",{class:"header-title"},"Data Pelanggan"),l("p",{class:"header-subtitle"},"Kelola semua data pelanggan Anda dengan mudah")],-1))]),l("div",ia,[a(r,{color:"success",onClick:e[0]||(e[0]=s=>H.value=!0),"prepend-icon":"mdi-file-upload-outline",class:"action-btn text-none mobile-btn",size:"default",block:""},{default:t(()=>e[32]||(e[32]=[n(" Import Data ")])),_:1,__:[32]}),a(r,{color:"primary",onClick:Me,loading:ee.value,"prepend-icon":"mdi-file-download-outline",class:"action-btn text-none mobile-btn",size:"default",block:""},{default:t(()=>e[33]||(e[33]=[n(" Export Data ")])),_:1,__:[33]},8,["loading"]),a(r,{color:"primary",onClick:e[1]||(e[1]=s=>G()),"prepend-icon":"mdi-account-plus",class:"primary-btn text-none mobile-btn",size:"default",block:"",elevation:"3"},{default:t(()=>e[34]||(e[34]=[n(" Tambah Pelanggan ")])),_:1,__:[34]})])])]),a(I,{class:"filter-card mb-4 mb-md-6",elevation:"0"},{default:t(()=>[l("div",da,[a(w,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=s=>B.value=s),label:"Cari Pelanggan (Nama, Email, No. Telp)","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":"",class:"mb-3"},null,8,["modelValue"]),l("div",ra,[a(W,{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=s=>S.value=s),items:ue.value,label:"Filter Alamat",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"flex-grow-1"},null,8,["modelValue","items"]),a(W,{modelValue:L.value,"onUpdate:modelValue":e[4]||(e[4]=s=>L.value=s),items:Z.value,"item-title":"brand","item-value":"id_brand",label:"Filter Brand",variant:"outlined",density:"comfortable","hide-details":"",clearable:"",class:"flex-grow-1"},null,8,["modelValue","items"])]),a(r,{variant:"text",onClick:$e,class:"text-none",block:""},{default:t(()=>e[35]||(e[35]=[n(" Reset Filter ")])),_:1,__:[35]})])]),_:1}),a(I,{class:"data-table-card",elevation:"0"},{default:t(()=>[l("div",ua,[l("div",ma,[l("div",pa,[a(i,{color:"primary",size:"20"},{default:t(()=>e[36]||(e[36]=[n("mdi-format-list-bulleted-square")])),_:1,__:[36]})]),e[37]||(e[37]=l("span",{class:"card-title ml-3"},"Daftar Pelanggan",-1))]),a(Y,{color:"primary",variant:"tonal",size:"small",class:"count-chip"},{default:t(()=>[a(i,{start:"",size:"small"},{default:t(()=>e[38]||(e[38]=[n("mdi-account-multiple")])),_:1,__:[38]}),n(" "+p(T.value.length),1)]),_:1})]),a(ce,null,{default:t(()=>[_.value.length>0?(v(),y("div",va,[l("span",fa,p(_.value.length)+" pelanggan terpilih",1),a(N),a(r,{color:"error",variant:"tonal","prepend-icon":"mdi-delete-sweep",onClick:Ue,size:"small"},{default:t(()=>e[39]||(e[39]=[l("span",{class:"d-none d-sm-inline"},"Hapus Terpilih",-1),l("span",{class:"d-inline d-sm-none"},"Hapus",-1)])),_:1,__:[39]})])):C("",!0)]),_:1}),l("div",ga,[E.value?(v(),y("div",ca,[a(_e,{color:"primary",indeterminate:"",size:"48"}),e[40]||(e[40]=l("p",{class:"mt-4 text-medium-emphasis"},"Memuat data pelanggan...",-1))])):T.value.length===0?(v(),y("div",_a,[a(i,{size:"64",color:"surface-variant"},{default:t(()=>e[41]||(e[41]=[n("mdi-account-off")])),_:1,__:[41]}),e[43]||(e[43]=l("div",{class:"no-data-text"},"Belum ada data pelanggan",-1)),e[44]||(e[44]=l("p",{class:"text-medium-emphasis mt-2"},"Mulai dengan menambahkan pelanggan pertama Anda",-1)),a(r,{color:"primary",variant:"elevated",onClick:e[5]||(e[5]=s=>G()),class:"mt-6 text-none","prepend-icon":"mdi-account-plus"},{default:t(()=>e[42]||(e[42]=[n(" Tambah Pelanggan ")])),_:1,__:[42]})])):(v(),y("div",ba,[(v(!0),y(we,null,Ve(Pe.value,s=>(v(),z(I,{key:s.id,class:"mobile-customer-card mb-3",elevation:"2"},{default:t(()=>[a(K,{class:"pa-4"},{default:t(()=>[l("div",ka,[a(Ke,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=A=>_.value=A),value:s,"hide-details":"",class:"me-3"},null,8,["modelValue","value"]),l("div",ya,[l("h3",xa,p(s.nama),1),l("p",wa,p(s.email),1)])]),l("div",Va,[l("div",za,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[45]||(e[45]=[n("mdi-card-account-details")])),_:1,__:[45]}),e[46]||(e[46]=l("span",{class:"detail-label"},"No. KTP:",-1)),l("span",Ca,p(s.no_ktp),1)]),l("div",Ta,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[47]||(e[47]=[n("mdi-map-marker")])),_:1,__:[47]}),e[48]||(e[48]=l("span",{class:"detail-label"},"Alamat:",-1)),l("span",Pa,p(s.alamat),1)]),s.alamat_2?(v(),y("div",Ua,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[49]||(e[49]=[n("mdi-map-marker-outline")])),_:1,__:[49]}),e[50]||(e[50]=l("span",{class:"detail-label"},"Alamat 2:",-1)),l("span",Da,p(s.alamat_2),1)])):C("",!0),l("div",Ia,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[51]||(e[51]=[n("mdi-home-variant")])),_:1,__:[51]}),e[52]||(e[52]=l("span",{class:"detail-label"},"Blok/Unit:",-1)),l("span",Aa,p(s.blok)+" / "+p(s.unit),1)]),l("div",$a,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[53]||(e[53]=[n("mdi-phone")])),_:1,__:[53]}),e[54]||(e[54]=l("span",{class:"detail-label"},"Telepon:",-1)),l("span",Ba,p(s.no_telp),1)]),l("div",Sa,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[55]||(e[55]=[n("mdi-wifi")])),_:1,__:[55]}),e[56]||(e[56]=l("span",{class:"detail-label"},"Layanan:",-1)),l("span",La,p(s.layanan),1)]),l("div",Na,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[57]||(e[57]=[n("mdi-domain")])),_:1,__:[57]}),e[58]||(e[58]=l("span",{class:"detail-label"},"Brand:",-1)),s.harga_layanan?(v(),z(Y,{key:0,size:"small",color:fe(s.harga_layanan?.brand||""),variant:"tonal",class:"ml-2"},{default:t(()=>[n(p(s.harga_layanan?.brand||"N/A"),1)]),_:2},1032,["color"])):C("",!0)]),l("div",qa,[a(i,{size:"small",class:"me-2 text-medium-emphasis"},{default:t(()=>e[59]||(e[59]=[n("mdi-calendar")])),_:1,__:[59]}),e[60]||(e[60]=l("span",{class:"detail-label"},"Instalasi:",-1)),l("span",Ma,p(ge(s.tgl_instalasi)),1)])]),l("div",Ga,[a(r,{size:"small",variant:"tonal",color:"primary",onClick:A=>G(s),"prepend-icon":"mdi-pencil",class:"flex-grow-1"},{default:t(()=>e[61]||(e[61]=[n(" Edit ")])),_:2,__:[61]},1032,["onClick"]),a(r,{size:"small",variant:"tonal",color:"error",onClick:A=>me(s),"prepend-icon":"mdi-delete",class:"flex-grow-1"},{default:t(()=>e[62]||(e[62]=[n(" Hapus ")])),_:2,__:[62]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),te.value?(v(),y("div",Ka,[a(r,{variant:"tonal",color:"primary",onClick:Ie,loading:se.value,class:"text-none"},{default:t(()=>e[63]||(e[63]=[n(" Muat Lebih Banyak ")])),_:1,__:[63]},8,["loading"])])):C("",!0)]))]),l("div",Ea,[a(Ee,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=s=>_.value=s),headers:Ce,items:T.value,loading:E.value,"item-value":"id",class:"elegant-table","items-per-page":10,"items-per-page-options":[5,10,25,50],hover:"","show-select":"","return-object":""},{loading:t(()=>[l("div",Fa,[l("div",Ra,[a(_e,{color:"primary",indeterminate:"",size:"48"}),e[64]||(e[64]=l("p",{class:"mt-4 text-medium-emphasis"},"Memuat data pelanggan...",-1))])])]),"item.nama":t(({item:s})=>[l("div",ja,[l("div",Oa,p(s.nama),1)])]),"item.id_brand":t(({item:s})=>[s.harga_layanan?(v(),z(Y,{key:0,size:"small",color:fe(s.harga_layanan?.brand||""),variant:"tonal",class:"brand-chip"},{default:t(()=>[a(i,{start:"",size:"small"},{default:t(()=>e[65]||(e[65]=[n("mdi-wifi")])),_:1,__:[65]}),n(" "+p(s.harga_layanan?.brand||"N/A"),1)]),_:2},1032,["color"])):C("",!0)]),"item.tgl_instalasi":t(({item:s})=>[l("div",Ha,[a(i,{size:"small",class:"mr-1"},{default:t(()=>e[66]||(e[66]=[n("mdi-calendar")])),_:1,__:[66]}),n(" "+p(ge(s.tgl_instalasi)),1)])]),"item.actions":t(({item:s})=>[l("div",Ja,[a(r,{size:"small",variant:"tonal",color:"primary",onClick:A=>G(s),icon:"mdi-pencil",class:"action-btn-small"},null,8,["onClick"]),a(r,{size:"small",variant:"tonal",color:"error",onClick:A=>me(s),icon:"mdi-delete",class:"action-btn-small"},null,8,["onClick"])])]),"no-data":t(()=>[l("div",Wa,[a(i,{size:"64",color:"surface-variant"},{default:t(()=>e[67]||(e[67]=[n("mdi-account-off")])),_:1,__:[67]}),e[69]||(e[69]=l("div",{class:"no-data-text"},"Belum ada data pelanggan",-1)),e[70]||(e[70]=l("p",{class:"text-medium-emphasis mt-2"},"Mulai dengan menambahkan pelanggan pertama Anda",-1)),a(r,{color:"primary",variant:"elevated",onClick:e[7]||(e[7]=s=>G()),class:"mt-6 text-none","prepend-icon":"mdi-account-plus"},{default:t(()=>e[68]||(e[68]=[n(" Tambah Pelanggan ")])),_:1,__:[68]})])]),_:1},8,["modelValue","items","loading"])])]),_:1}),a(X,{modelValue:F.value,"onUpdate:modelValue":e[24]||(e[24]=s=>F.value=s),"max-width":"1000px",fullscreen:o.$vuetify.display.mobile,persistent:"",class:"form-dialog"},{default:t(()=>[a(I,{class:"form-card"},{default:t(()=>[l("div",Ya,[l("div",Qa,[a(i,{class:"mr-3",size:"24"},{default:t(()=>e[71]||(e[71]=[n("mdi-account-edit")])),_:1,__:[71]}),l("span",Xa,p(Te.value),1)]),o.$vuetify.display.mobile?(v(),z(r,{key:0,icon:"",variant:"text",onClick:oe,class:"mobile-close-btn"},{default:t(()=>[a(i,{color:"white"},{default:t(()=>e[72]||(e[72]=[n("mdi-close")])),_:1,__:[72]})]),_:1})):C("",!0)]),a(K,{class:"form-content"},{default:t(()=>[a(He,{ref:"form",modelValue:O.value,"onUpdate:modelValue":e[21]||(e[21]=s=>O.value=s)},{default:t(()=>[a(Oe,{modelValue:x.value,"onUpdate:modelValue":e[20]||(e[20]=s=>x.value=s),flat:"",class:"elegant-stepper",mobile:o.$vuetify.display.mobile},{default:t(()=>[a(Fe,{class:"stepper-header"},{default:t(()=>[a(be,{title:"Info Pribadi",value:1,complete:x.value>1,color:"primary"},null,8,["complete"]),a(de,{class:"stepper-divider"}),a(be,{title:"Alamat & Layanan",value:2,color:"primary"})]),_:1}),a(je,{class:"stepper-content"},{default:t(()=>[a(ye,{value:1,class:"step-content"},{default:t(()=>[e[85]||(e[85]=l("div",{class:"step-header"},[l("h3",{class:"step-title"},"Informasi Pribadi"),l("p",{class:"step-subtitle"},"Masukkan data pribadi pelanggan dengan lengkap")],-1)),a(ke,{class:"form-row"},{default:t(()=>[a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",Za,[l("label",ha,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[73]||(e[73]=[n("mdi-account")])),_:1,__:[73]}),e[74]||(e[74]=n(" Nama Lengkap ")),e[75]||(e[75]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.nama,"onUpdate:modelValue":e[9]||(e[9]=s=>m.value.nama=s),rules:[k.required],variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1}),a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",el,[l("label",al,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[76]||(e[76]=[n("mdi-card-account-details")])),_:1,__:[76]}),e[77]||(e[77]=n(" Nomor KTP ")),e[78]||(e[78]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.no_ktp,"onUpdate:modelValue":e[10]||(e[10]=s=>m.value.no_ktp=s),rules:[k.required,k.ktp],variant:"outlined",counter:"16",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1}),a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",ll,[l("label",tl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[79]||(e[79]=[n("mdi-email")])),_:1,__:[79]}),e[80]||(e[80]=n(" Email ")),e[81]||(e[81]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.email,"onUpdate:modelValue":e[11]||(e[11]=s=>m.value.email=s),rules:[k.required,k.email],variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1}),a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",sl,[l("label",nl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[82]||(e[82]=[n("mdi-phone")])),_:1,__:[82]}),e[83]||(e[83]=n(" Nomor Telepon ")),e[84]||(e[84]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.no_telp,"onUpdate:modelValue":e[12]||(e[12]=s=>m.value.no_telp=s),rules:[k.required,k.phone],variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1})]),_:1})]),_:1,__:[85]}),a(ye,{value:2,class:"step-content"},{default:t(()=>[e[105]||(e[105]=l("div",{class:"step-header"},[l("h3",{class:"step-title"},"Alamat & Layanan"),l("p",{class:"step-subtitle"},"Lengkapi informasi alamat dan layanan pelanggan")],-1)),a(ke,{class:"form-row"},{default:t(()=>[a(c,{cols:"12"},{default:t(()=>[l("div",ol,[l("label",il,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[86]||(e[86]=[n("mdi-map-marker")])),_:1,__:[86]}),e[87]||(e[87]=n(" Alamat Utama ")),e[88]||(e[88]=l("span",{class:"required-flag text-error"},"*",-1))]),a(Re,{modelValue:m.value.alamat,"onUpdate:modelValue":e[13]||(e[13]=s=>m.value.alamat=s),items:ue.value,rules:[k.required],variant:"outlined",class:"elegant-input",density:"comfortable",placeholder:"Pilih atau ketik alamat"},null,8,["modelValue","items","rules"])])]),_:1}),a(c,{cols:"12"},{default:t(()=>[l("div",dl,[l("label",rl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[89]||(e[89]=[n("mdi-map-marker-outline")])),_:1,__:[89]}),e[90]||(e[90]=n(" Alamat Tambahan (Opsional) "))]),a(w,{modelValue:m.value.alamat_2,"onUpdate:modelValue":e[14]||(e[14]=s=>m.value.alamat_2=s),variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue"])])]),_:1}),a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",ul,[l("label",ml,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[91]||(e[91]=[n("mdi-home-variant")])),_:1,__:[91]}),e[92]||(e[92]=n(" Blok ")),e[93]||(e[93]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.blok,"onUpdate:modelValue":e[15]||(e[15]=s=>m.value.blok=s),rules:[k.required],variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1}),a(c,{cols:"12",md:"6"},{default:t(()=>[l("div",pl,[l("label",vl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[94]||(e[94]=[n("mdi-door")])),_:1,__:[94]}),e[95]||(e[95]=n(" Unit ")),e[96]||(e[96]=l("span",{class:"required-flag text-error"},"*",-1))]),a(w,{modelValue:m.value.unit,"onUpdate:modelValue":e[16]||(e[16]=s=>m.value.unit=s),rules:[k.required],variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","rules"])])]),_:1}),a(c,{cols:"12",md:"4"},{default:t(()=>[l("div",fl,[l("label",gl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[97]||(e[97]=[n("mdi-calendar")])),_:1,__:[97]}),e[98]||(e[98]=n(" Tanggal Instalasi "))]),a(w,{modelValue:m.value.tgl_instalasi,"onUpdate:modelValue":e[17]||(e[17]=s=>m.value.tgl_instalasi=s),type:"date",variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue"])])]),_:1}),a(c,{cols:"12",md:"4"},{default:t(()=>[l("div",cl,[l("label",_l,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[99]||(e[99]=[n("mdi-wifi")])),_:1,__:[99]}),e[100]||(e[100]=n(" Layanan ")),e[101]||(e[101]=l("span",{class:"required-flag text-error"},"*",-1))]),a(W,{modelValue:m.value.layanan,"onUpdate:modelValue":e[18]||(e[18]=s=>m.value.layanan=s),items:ze.value,variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","items"])])]),_:1}),a(c,{cols:"12",md:"4"},{default:t(()=>[l("div",bl,[l("label",kl,[a(i,{size:"small",class:"mr-2"},{default:t(()=>e[102]||(e[102]=[n("mdi-domain")])),_:1,__:[102]}),e[103]||(e[103]=n(" Brand Provider ")),e[104]||(e[104]=l("span",{class:"required-flag text-error"},"*",-1))]),a(W,{modelValue:m.value.id_brand,"onUpdate:modelValue":e[19]||(e[19]=s=>m.value.id_brand=s),items:Z.value,"item-title":"brand","item-value":"id_brand",variant:"outlined",class:"elegant-input",density:"comfortable"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1,__:[105]})]),_:1})]),_:1},8,["modelValue","mobile"])]),_:1},8,["modelValue"])]),_:1}),a(Q,{class:"form-actions"},{default:t(()=>[x.value>1?(v(),z(r,{key:0,onClick:e[22]||(e[22]=s=>x.value--),variant:"text",class:"nav-btn","prepend-icon":"mdi-arrow-left"},{default:t(()=>e[106]||(e[106]=[n(" Kembali ")])),_:1,__:[106]})):C("",!0),a(N),o.$vuetify.display.mobile?C("",!0):(v(),z(r,{key:1,onClick:oe,variant:"text",class:"nav-btn"},{default:t(()=>e[107]||(e[107]=[n(" Batal ")])),_:1,__:[107]})),x.value<2?(v(),z(r,{key:2,onClick:e[23]||(e[23]=s=>x.value++),color:"primary",class:"nav-btn","append-icon":"mdi-arrow-right"},{default:t(()=>e[108]||(e[108]=[n(" Lanjut ")])),_:1,__:[108]})):(v(),z(r,{key:3,onClick:Le,loading:h.value,disabled:!O.value,color:"primary",variant:"elevated",class:"save-btn","prepend-icon":"mdi-content-save"},{default:t(()=>e[109]||(e[109]=[n(" Simpan ")])),_:1,__:[109]},8,["loading","disabled"]))]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),a(X,{modelValue:R.value,"onUpdate:modelValue":e[25]||(e[25]=s=>R.value=s),"max-width":"500px",class:"delete-dialog"},{default:t(()=>[a(I,{class:"delete-card"},{default:t(()=>[l("div",yl,[a(i,{class:"mr-3"},{default:t(()=>e[110]||(e[110]=[n("mdi-delete-alert")])),_:1,__:[110]}),e[111]||(e[111]=l("span",{class:"delete-title"},"Konfirmasi Hapus",-1))]),a(K,{class:"delete-content"},{default:t(()=>[l("div",xl,[a(i,{size:"72",color:"warning",class:"mb-4"},{default:t(()=>e[112]||(e[112]=[n("mdi-alert-circle-outline")])),_:1,__:[112]}),l("p",wl,[e[113]||(e[113]=n(" Anda yakin ingin menghapus pelanggan ")),l("strong",Vl,p(M.value?.nama),1),e[114]||(e[114]=n("? "))]),e[115]||(e[115]=l("p",{class:"delete-warning"},"Tindakan ini tidak dapat dibatalkan!",-1))])]),_:1}),a(Q,{class:"delete-actions"},{default:t(()=>[a(N),a(r,{onClick:pe,variant:"text",class:"cancel-btn"},{default:t(()=>e[116]||(e[116]=[n(" Batal ")])),_:1,__:[116]}),a(r,{onClick:Ne,loading:$.value,color:"error",variant:"elevated",class:"delete-btn","prepend-icon":"mdi-delete"},{default:t(()=>e[117]||(e[117]=[n(" Ya, Hapus ")])),_:1,__:[117]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(X,{modelValue:q.value,"onUpdate:modelValue":e[27]||(e[27]=s=>q.value=s),"max-width":"500px",class:"delete-dialog"},{default:t(()=>[a(I,{class:"delete-card"},{default:t(()=>[l("div",zl,[a(i,{class:"mr-3"},{default:t(()=>e[118]||(e[118]=[n("mdi-delete-sweep-outline")])),_:1,__:[118]}),e[119]||(e[119]=l("span",{class:"delete-title"},"Konfirmasi Hapus Massal",-1))]),a(K,{class:"delete-content"},{default:t(()=>[l("div",Cl,[a(i,{size:"72",color:"warning",class:"mb-4"},{default:t(()=>e[120]||(e[120]=[n("mdi-alert-circle-outline")])),_:1,__:[120]}),l("p",Tl,[e[121]||(e[121]=n(" Anda yakin ingin menghapus ")),l("strong",null,p(_.value.length)+" pelanggan",1),e[122]||(e[122]=n(" yang dipilih? "))]),e[123]||(e[123]=l("p",{class:"delete-warning"},"Tindakan ini tidak dapat dibatalkan!",-1))])]),_:1}),a(Q,{class:"delete-actions"},{default:t(()=>[a(N),a(r,{onClick:e[26]||(e[26]=s=>q.value=!1),variant:"text",class:"cancel-btn"},{default:t(()=>e[124]||(e[124]=[n(" Batal ")])),_:1,__:[124]}),a(r,{onClick:De,loading:$.value,color:"error",variant:"elevated",class:"delete-btn","prepend-icon":"mdi-delete"},{default:t(()=>e[125]||(e[125]=[n(" Ya, Hapus ")])),_:1,__:[125]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(X,{modelValue:H.value,"onUpdate:modelValue":e[28]||(e[28]=s=>H.value=s),"max-width":"800px",fullscreen:o.$vuetify.display.mobile,persistent:"",class:"import-dialog"},{default:t(()=>[a(I,{class:"import-card"},{default:t(()=>[l("div",Pl,[a(i,{class:"mr-3"},{default:t(()=>e[126]||(e[126]=[n("mdi-upload")])),_:1,__:[126]}),e[128]||(e[128]=l("span",{class:"import-title"},"Import Pelanggan dari CSV",-1)),a(N),a(r,{icon:"",variant:"text",onClick:ie,size:"small"},{default:t(()=>[a(i,{color:"white"},{default:t(()=>e[127]||(e[127]=[n("mdi-close")])),_:1,__:[127]})]),_:1})]),a(K,{class:"import-content"},{default:t(()=>[a(Je,{border:"",rounded:"lg",class:"template-card pa-4 mb-6",color:"surface-variant"},{default:t(()=>[l("div",Ul,[l("div",Dl,[a(i,{color:"success",size:"32"},{default:t(()=>e[129]||(e[129]=[n("mdi-file-document-outline")])),_:1,__:[129]})]),e[131]||(e[131]=l("div",{class:"flex-grow-1 text-center text-sm-left"},[l("div",{class:"template-title"},"Gunakan Template Kami"),l("p",{class:"template-subtitle"}," Unduh template CSV untuk memastikan format data sesuai dengan sistem. ")],-1)),a(r,{color:"success",variant:"elevated",onClick:qe,loading:ae.value,"prepend-icon":"mdi-download",class:"template-btn",block:o.$vuetify.display.mobile},{default:t(()=>e[130]||(e[130]=[n(" Unduh Template ")])),_:1,__:[130]},8,["loading","block"])])]),_:1}),l("div",Il,[l("h6",Al,[a(i,{class:"mr-2"},{default:t(()=>e[132]||(e[132]=[n("mdi-cloud-upload")])),_:1,__:[132]}),e[133]||(e[133]=n(" Unggah File CSV "))]),a(We,{"model-value":P.value,"onUpdate:modelValue":Be,label:"Pilih file .csv",accept:".csv",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-paperclip","show-size":"",clearable:"","hide-details":"auto",class:"file-input",density:"comfortable"},null,8,["model-value"])]),a(ce,null,{default:t(()=>[b.value.length>0?(v(),y("div",$l,[a(Ye,{type:"error",variant:"tonal",prominent:"",border:"start",class:"error-alert"},{title:t(()=>[l("div",Bl,[e[134]||(e[134]=l("span",null,"Import Gagal",-1)),a(Y,{color:"error",size:"small"},{default:t(()=>[n(p(b.value.length)+" Kesalahan ",1)]),_:1})])]),default:t(()=>[e[136]||(e[136]=l("p",{class:"mb-3"},"Mohon perbaiki kesalahan berikut di file CSV Anda dan coba lagi.",-1)),a(de,{class:"mb-3"}),l("div",Sl,[(v(!0),y(we,null,Ve(b.value,(s,A)=>(v(),y("div",{key:A,class:"error-item d-flex align-start mb-2"},[a(i,{size:"small",color:"error",class:"mr-2 mt-1"},{default:t(()=>e[135]||(e[135]=[n("mdi-alert-circle")])),_:1,__:[135]}),l("span",Ll,p(s),1)]))),128))])]),_:1,__:[136]})])):C("",!0)]),_:1})]),_:1}),a(de),a(Q,{class:"import-actions"},{default:t(()=>[a(N),a(r,{variant:"text",onClick:ie,class:"nav-btn"},{default:t(()=>e[137]||(e[137]=[n(" Batal ")])),_:1,__:[137]}),a(r,{color:"success",variant:"elevated",onClick:Ge,loading:J.value,disabled:P.value.length===0,"prepend-icon":"mdi-upload",class:"import-btn"},{default:t(()=>e[138]||(e[138]=[n(" Import Sekarang ")])),_:1,__:[138]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),a(Qe,{modelValue:U.value.show,"onUpdate:modelValue":e[29]||(e[29]=s=>U.value.show=s),color:U.value.color,timeout:4e3,location:"top right",class:"enhanced-snackbar"},{default:t(()=>[l("div",Nl,[a(i,{class:"mr-2"},{default:t(()=>[n(p(U.value.color==="success"?"mdi-check-circle":U.value.color==="error"?"mdi-alert-circle":"mdi-information"),1)]),_:1}),n(" "+p(U.value.text),1)])]),_:1},8,["modelValue","color"])]),_:1})}}}),El=aa(ql,[["__scopeId","data-v-2adf4463"]]);export{El as default};
