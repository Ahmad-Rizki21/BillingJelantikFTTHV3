import{d as R,r as m,c as x,o as X,a as A,b as Y,w as a,e as o,f as s,g as e,h as n,v as Z,t as u,m as ee,l as te,_ as se}from"./index-DDZ3D2Zd.js";const ae={class:"header-section"},ie={class:"d-flex align-center"},oe={class:"header-icon-wrapper me-4"},le={class:"stats-section mb-6"},ne={class:"d-flex align-center"},re={class:"stats-icon me-3"},de={class:"text-h5 font-weight-bold text-purple"},ce={class:"d-flex align-center"},ue={class:"stats-icon me-3"},me={class:"text-h5 font-weight-bold text-success"},ve={class:"d-flex align-center"},_e={class:"stats-icon me-3"},pe={class:"text-h5 font-weight-bold text-info"},fe={class:"d-flex align-center"},ge={class:"stats-icon me-3"},he={class:"text-h5 font-weight-bold text-error"},xe={class:"table-header"},we={class:"d-flex align-center flex-grow-1"},be={class:"d-flex align-center gap-3"},ke={class:"id-cell"},ye={class:"permission-name-cell"},Pe={class:"actions-cell"},Ve={class:"table-footer"},ze={class:"d-flex justify-center pa-4"},Ce={class:"d-flex align-center"},We=R({__name:"PermissionsView",setup(Ae){const d=m([]),w=m(!0),f=m(!1),v=m(""),V=m(1),D=m(20),c=m({show:!1,text:"",color:"success"}),N=[{title:"ID",key:"id",width:"120px",sortable:!0},{title:"Permission Name",key:"name",sortable:!0},{title:"Actions",key:"actions",width:"100px",sortable:!1}],I=x(()=>d.value.filter(i=>i.name.startsWith("create")).length),M=x(()=>d.value.filter(i=>i.name.startsWith("view")).length),U=x(()=>d.value.filter(i=>i.name.startsWith("delete")).length),b=x(()=>v.value?d.value.filter(i=>i.name.toLowerCase().includes(v.value.toLowerCase())):d.value);X(z);async function z(){w.value=!0;try{const i=await A.get("/permissions/");d.value=i.data}catch{_("Gagal memuat permissions","error")}finally{w.value=!1}}async function B(){f.value=!0;try{await A.post("/permissions/generate"),_("Permissions berhasil di-generate!","success"),z()}catch(i){i.response&&i.response.status===200?_(i.response.data.detail,"info"):_("Gagal men-generate permissions","error")}finally{f.value=!1}}function G(i){return i.startsWith("create")?"success":i.startsWith("view")?"info":i.startsWith("edit")?"warning":i.startsWith("delete")?"error":"grey"}function S(i){return i.startsWith("create")?"mdi-plus-circle":i.startsWith("view")?"mdi-eye":i.startsWith("edit")?"mdi-pencil":i.startsWith("delete")?"mdi-delete":"mdi-shield"}function k(i){return i.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function T(i){switch(i){case"success":return"mdi-check-circle";case"error":return"mdi-alert-circle";case"info":return"mdi-information";case"warning":return"mdi-alert";default:return"mdi-information"}}function $(i){_(`Viewing details for: ${k(i.name)}`,"info")}function _(i,t){c.value.text=i,c.value.color=t,c.value.show=!0}return(i,t)=>{const r=o("v-icon"),L=o("v-avatar"),C=o("v-btn"),y=o("v-container"),g=o("v-card-text"),p=o("v-card"),h=o("v-col"),j=o("v-row"),H=o("v-text-field"),P=o("v-chip"),K=o("v-card-title"),W=o("v-divider"),q=o("v-skeleton-loader"),E=o("v-tooltip"),F=o("v-pagination"),J=o("v-data-table"),O=o("v-snackbar");return te(),Y(y,{fluid:"",class:"pa-0"},{default:a(()=>[s("div",ae,[e(y,{class:"pa-6"},{default:a(()=>[s("div",ie,[s("div",oe,[e(L,{class:"header-avatar",color:"transparent",size:"56"},{default:a(()=>[e(r,{color:"white",size:"28"},{default:a(()=>t[3]||(t[3]=[n("mdi-shield-key")])),_:1,__:[3]})]),_:1})]),t[5]||(t[5]=s("div",{class:"flex-grow-1"},[s("h1",{class:"header-title text-white mb-1"},"Permissions Management"),s("p",{class:"header-subtitle text-white mb-0 opacity-90"},"Kelola semua hak akses sistem dengan mudah dan aman")],-1)),e(C,{color:"white",variant:"elevated",size:"large",elevation:"0",onClick:B,loading:f.value,"prepend-icon":"mdi-auto-fix",class:Z(["text-none font-weight-bold generate-btn",{"generate-btn--loading":f.value}])},{default:a(()=>t[4]||(t[4]=[s("span",{class:"text-purple"},"Auto Generate Permissions",-1)])),_:1,__:[4]},8,["loading","class"])])]),_:1})]),e(y,{class:"pa-6"},{default:a(()=>[s("div",le,[e(j,null,{default:a(()=>[e(h,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(p,{class:"stats-card stats-card--purple",elevation:"0"},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>[s("div",ne,[s("div",re,[e(r,{color:"purple",size:"24"},{default:a(()=>t[6]||(t[6]=[n("mdi-shield-check")])),_:1,__:[6]})]),s("div",null,[s("div",de,u(d.value.length),1),t[7]||(t[7]=s("div",{class:"text-caption text-medium-emphasis"},"Total Permissions",-1))])])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(p,{class:"stats-card stats-card--success",elevation:"0"},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>[s("div",ce,[s("div",ue,[e(r,{color:"success",size:"24"},{default:a(()=>t[8]||(t[8]=[n("mdi-plus-circle")])),_:1,__:[8]})]),s("div",null,[s("div",me,u(I.value),1),t[9]||(t[9]=s("div",{class:"text-caption text-medium-emphasis"},"Create Permissions",-1))])])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(p,{class:"stats-card stats-card--info",elevation:"0"},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>[s("div",ve,[s("div",_e,[e(r,{color:"info",size:"24"},{default:a(()=>t[10]||(t[10]=[n("mdi-eye")])),_:1,__:[10]})]),s("div",null,[s("div",pe,u(M.value),1),t[11]||(t[11]=s("div",{class:"text-caption text-medium-emphasis"},"View Permissions",-1))])])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(p,{class:"stats-card stats-card--error",elevation:"0"},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>[s("div",fe,[s("div",ge,[e(r,{color:"error",size:"24"},{default:a(()=>t[12]||(t[12]=[n("mdi-delete")])),_:1,__:[12]})]),s("div",null,[s("div",he,u(U.value),1),t[13]||(t[13]=s("div",{class:"text-caption text-medium-emphasis"},"Delete Permissions",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),e(p,{class:"permissions-table-card",elevation:"0"},{default:a(()=>[s("div",xe,[e(K,{class:"d-flex align-center pa-6"},{default:a(()=>[s("div",we,[e(r,{color:"purple",size:"24",class:"me-3"},{default:a(()=>t[14]||(t[14]=[n("mdi-format-list-bulleted")])),_:1,__:[14]}),t[15]||(t[15]=s("span",{class:"text-h6 font-weight-bold"},"Daftar Hak Akses",-1))]),s("div",be,[e(H,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=l=>v.value=l),"prepend-inner-icon":"mdi-magnify",label:"Cari permissions...",variant:"outlined",density:"compact","hide-details":"",class:"search-field",clearable:""},null,8,["modelValue"]),e(P,{color:d.value.length>0?"purple":"grey",variant:"tonal",size:"small",class:"permissions-counter"},{default:a(()=>[e(r,{start:"",size:"16"},{default:a(()=>t[16]||(t[16]=[n("mdi-counter")])),_:1,__:[16]}),n(" "+u(b.value.length)+" permissions ",1)]),_:1},8,["color"])])]),_:1})]),e(W),e(J,{headers:N,items:b.value,loading:w.value,search:v.value,"item-value":"id","items-per-page":"20",class:"permissions-table","loading-text":"Memuat permissions...","no-data-text":"Tidak ada permissions ditemukan"},{loading:a(()=>[e(q,{type:"table-row@5"})]),"item.id":a(({item:l})=>[s("div",ke,[e(P,{size:"small",variant:"outlined",color:"grey-darken-1"},{default:a(()=>[n(" #"+u(l.id),1)]),_:2},1024)])]),"item.name":a(({item:l})=>[s("div",ye,[e(P,{color:G(l.name),variant:"flat",size:"default",class:"permission-chip"},{default:a(()=>[e(r,{icon:S(l.name),size:"16",start:""},null,8,["icon"]),n(" "+u(k(l.name)),1)]),_:2},1032,["color"])])]),"item.actions":a(({item:l})=>[s("div",Pe,[e(E,{text:`View details for ${k(l.name)}`},{activator:a(({props:Q})=>[e(C,ee(Q,{icon:"mdi-information-outline",size:"small",variant:"text",color:"info",onClick:De=>$(l)}),null,16,["onClick"])]),_:2},1032,["text"])])]),bottom:a(()=>[s("div",Ve,[e(W),s("div",ze,[e(F,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),length:Math.ceil(b.value.length/D.value),"total-visible":5,color:"purple",rounded:""},null,8,["modelValue","length"])])])]),_:1},8,["items","loading","search"])]),_:1})]),_:1}),e(O,{modelValue:c.value.show,"onUpdate:modelValue":t[2]||(t[2]=l=>c.value.show=l),color:c.value.color,timeout:4e3,location:"top right",variant:"elevated",class:"custom-snackbar"},{default:a(()=>[s("div",Ce,[e(r,{icon:T(c.value.color),size:"20",class:"me-2"},null,8,["icon"]),n(" "+u(c.value.text),1)])]),_:1},8,["modelValue","color"])]),_:1})}}}),Ie=se(We,[["__scopeId","data-v-1b7e6ba0"]]);export{Ie as default};
