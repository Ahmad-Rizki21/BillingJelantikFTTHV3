import{d as R,r as m,c as C,p as H,o as G,b as O,w as s,a as k,e as v,f as l,g as a,h as t,t as u,v as f,j as S,l as y,_ as E}from"./index-DDZ3D2Zd.js";import{d as q}from"./debounce-BMmXVQ06.js";const A={class:"page-header mb-6"},J={class:"header-content"},Q={class:"header-icon-wrapper"},W={class:"input-group mb-6"},X={class:"input-label"},Y={class:"input-group mb-6"},Z={class:"input-label"},ee={class:"input-group mb-4"},le={class:"input-label"},ae={class:"progress-section"},se={class:"progress-header mb-3"},te={class:"progress-percentage"},ie={class:"progress-steps mt-3"},oe={key:0,class:"empty-state"},ne={class:"empty-illustration"},re={class:"empty-checklist mt-4"},ce={key:1,class:"result-display"},de={class:"result-header mb-4"},ue={class:"selected-info"},ve={class:"selected-brand"},pe={class:"selected-package"},_e={class:"calculation-grid"},me={class:"calc-item"},fe={class:"calc-icon-wrapper"},ge={class:"calc-content"},ke={class:"calc-value"},ye={class:"calc-item"},be={class:"calc-icon-wrapper"},he={class:"calc-content"},Pe={class:"calc-value"},we={class:"calc-item"},ze={class:"calc-icon-wrapper"},Te={class:"calc-content"},Ve={class:"calc-label"},xe={class:"calc-value"},Be={class:"total-section"},Ce={class:"total-wrapper"},He={class:"total-icon"},Se={class:"total-content"},De={class:"total-amount"},je={class:"result-actions mt-4"},Le=R({__name:"CalculatorView",setup(Ie){const b=m([]),h=m([]),i=m(null),o=m(null),c=m(new Date().toISOString().split("T")[0]),d=m(null),g=C(()=>i.value?h.value.filter(n=>n.id_brand===i.value?.id_brand):[]),P=C(()=>{let n=0;return i.value&&(n+=33.33),o.value&&(n+=33.33),c.value&&(n+=33.34),Math.round(n)});H([i,o,c],q(async()=>{if(i.value&&o.value&&c.value)try{const n=await k.post("/calculator/prorate",{id_brand:i.value.id_brand,paket_layanan_id:o.value,tgl_mulai:c.value});d.value=n.data}catch(n){console.error("Gagal melakukan kalkulasi:",n),d.value=null}else d.value=null},500)),H(i,()=>{o.value=null,d.value=null});async function D(){const n=await k.get("/harga_layanan/");b.value=n.data}async function j(){const n=await k.get("/paket_layanan/");h.value=n.data}function _(n){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n)}function L(){i.value=null,o.value=null,c.value=new Date().toISOString().split("T")[0],d.value=null}async function I(){if(!d.value)return;const n=`
Hasil Kalkulasi Harga Prorate:
Brand: ${i.value?.brand}
Paket: ${g.value.find(e=>e.id===o.value)?.nama_paket}
Periode: ${d.value.periode_hari} hari
Harga Dasar: ${_(d.value.harga_dasar_prorate)}
Pajak: ${_(d.value.pajak)}
Total: ${_(d.value.total_harga_prorate)}
  `;try{await navigator.clipboard.writeText(n.trim()),console.log("Hasil berhasil disalin ke clipboard")}catch(e){console.error("Gagal menyalin hasil:",e)}}return G(()=>{D(),j()}),(n,e)=>{const r=v("v-icon"),w=v("v-card-title"),z=v("v-select"),$=v("v-text-field"),M=v("v-progress-linear"),T=v("v-card-text"),V=v("v-card"),x=v("v-col"),F=v("v-chip"),N=v("v-divider"),B=v("v-btn"),U=v("v-row"),K=v("v-container");return y(),O(K,{fluid:"",class:"calculator-container"},{default:s(()=>[l("div",A,[l("div",J,[l("div",Q,[a(r,{size:"32"},{default:s(()=>e[3]||(e[3]=[t("mdi-calculator")])),_:1,__:[3]})]),e[4]||(e[4]=l("div",null,[l("h1",{class:"page-title"},"Simulasi Harga"),l("p",{class:"page-subtitle"},"Simulasi perhitungan harga prorate untuk layanan FTTH")],-1))])]),a(U,null,{default:s(()=>[a(x,{cols:"12",lg:"5",md:"6"},{default:s(()=>[a(V,{class:"calculator-form-card",elevation:"0"},{default:s(()=>[a(w,{class:"form-card-header"},{default:s(()=>[a(r,{class:"me-2",color:"primary"},{default:s(()=>e[5]||(e[5]=[t("mdi-form-select")])),_:1,__:[5]}),e[6]||(e[6]=t(" Form Kalkulasi "))]),_:1,__:[6]}),a(T,{class:"form-content"},{default:s(()=>[l("div",W,[l("label",X,[a(r,{size:"18",class:"me-2"},{default:s(()=>e[7]||(e[7]=[t("mdi-domain")])),_:1,__:[7]}),e[8]||(e[8]=t(" Pilih Brand "))]),a(z,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=p=>i.value=p),items:b.value,"item-title":"brand","item-value":"id_brand","return-object":"",variant:"outlined",density:"comfortable",class:"modern-select",placeholder:"Pilih brand layanan","prepend-inner-icon":i.value?"mdi-check-circle":"mdi-circle-outline",color:i.value?"success":"primary"},null,8,["modelValue","items","prepend-inner-icon","color"])]),l("div",Y,[l("label",Z,[a(r,{size:"18",class:"me-2"},{default:s(()=>e[9]||(e[9]=[t("mdi-package-variant")])),_:1,__:[9]}),e[10]||(e[10]=t(" Pilih Paket Layanan "))]),a(z,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=p=>o.value=p),items:g.value,"item-title":"nama_paket","item-value":"id",variant:"outlined",density:"comfortable",class:"modern-select",disabled:!i.value,placeholder:"Pilih paket layanan","prepend-inner-icon":o.value?"mdi-check-circle":"mdi-circle-outline",color:o.value?"success":"primary",loading:!i.value},null,8,["modelValue","items","disabled","prepend-inner-icon","color","loading"])]),l("div",ee,[l("label",le,[a(r,{size:"18",class:"me-2"},{default:s(()=>e[11]||(e[11]=[t("mdi-calendar")])),_:1,__:[11]}),e[12]||(e[12]=t(" Tanggal Mulai Layanan "))]),a($,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=p=>c.value=p),type:"date",variant:"outlined",density:"comfortable",class:"modern-input",disabled:!o.value,"prepend-inner-icon":c.value?"mdi-check-circle":"mdi-circle-outline",color:c.value?"success":"primary"},null,8,["modelValue","disabled","prepend-inner-icon","color"])]),l("div",ae,[l("div",se,[e[13]||(e[13]=l("span",{class:"progress-title"},"Progress Pengisian",-1)),l("span",te,u(P.value)+"%",1)]),a(M,{"model-value":P.value,color:"primary",height:"6",rounded:"",class:"progress-bar"},null,8,["model-value"]),l("div",ie,[l("div",{class:f(["step",{active:i.value}])},[a(r,{size:"16",color:i.value?"success":"grey"},{default:s(()=>[t(u(i.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[14]||(e[14]=l("span",null,"Brand",-1))],2),l("div",{class:f(["step",{active:o.value}])},[a(r,{size:"16",color:o.value?"success":"grey"},{default:s(()=>[t(u(o.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[15]||(e[15]=l("span",null,"Paket",-1))],2),l("div",{class:f(["step",{active:c.value}])},[a(r,{size:"16",color:c.value?"success":"grey"},{default:s(()=>[t(u(c.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[16]||(e[16]=l("span",null,"Tanggal",-1))],2)])])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",lg:"7",md:"6"},{default:s(()=>[a(V,{class:"result-card",elevation:"0"},{default:s(()=>[a(w,{class:"result-card-header"},{default:s(()=>[a(r,{class:"me-2",color:"success"},{default:s(()=>e[17]||(e[17]=[t("mdi-calculator-variant")])),_:1,__:[17]}),e[18]||(e[18]=t(" Hasil Simulasi "))]),_:1,__:[18]}),a(T,{class:"result-content"},{default:s(()=>[d.value?(y(),S("div",ce,[l("div",de,[a(F,{color:"success",variant:"tonal",size:"small",class:"mb-2"},{default:s(()=>[a(r,{start:""},{default:s(()=>e[25]||(e[25]=[t("mdi-check-circle")])),_:1,__:[25]}),e[26]||(e[26]=t(" Kalkulasi Berhasil "))]),_:1,__:[26]}),l("div",ue,[l("p",ve,u(i.value?.brand),1),l("p",pe,u(g.value.find(p=>p.id===o.value)?.nama_paket),1)])]),l("div",_e,[l("div",me,[l("div",fe,[a(r,{color:"info"},{default:s(()=>e[27]||(e[27]=[t("mdi-calendar-range")])),_:1,__:[27]})]),l("div",ge,[e[28]||(e[28]=l("div",{class:"calc-label"},"Periode Tagihan",-1)),l("div",ke,u(d.value.periode_hari)+" hari",1)])]),l("div",ye,[l("div",be,[a(r,{color:"primary"},{default:s(()=>e[29]||(e[29]=[t("mdi-cash")])),_:1,__:[29]})]),l("div",he,[e[30]||(e[30]=l("div",{class:"calc-label"},"Harga Dasar (Prorate)",-1)),l("div",Pe,u(_(d.value.harga_dasar_prorate)),1)])]),l("div",we,[l("div",ze,[a(r,{color:"warning"},{default:s(()=>e[31]||(e[31]=[t("mdi-percent")])),_:1,__:[31]})]),l("div",Te,[l("div",Ve,"Pajak ("+u(i.value?.pajak||0)+"%)",1),l("div",xe,u(_(d.value.pajak)),1)])])]),a(N,{class:"my-4"}),l("div",Be,[l("div",Ce,[l("div",He,[a(r,{size:"24",color:"success"},{default:s(()=>e[32]||(e[32]=[t("mdi-calculator")])),_:1,__:[32]})]),l("div",Se,[e[33]||(e[33]=l("div",{class:"total-label"},"Total Tagihan",-1)),l("div",De,u(_(d.value.total_harga_prorate)),1)])])]),l("div",je,[a(B,{color:"primary",variant:"outlined","prepend-icon":"mdi-refresh",onClick:L,class:"me-2"},{default:s(()=>e[34]||(e[34]=[t(" Hitung Ulang ")])),_:1,__:[34]}),a(B,{color:"success",variant:"tonal","prepend-icon":"mdi-content-copy",onClick:I},{default:s(()=>e[35]||(e[35]=[t(" Salin Hasil ")])),_:1,__:[35]})])])):(y(),S("div",oe,[l("div",ne,[a(r,{size:"80",color:"grey-lighten-1"},{default:s(()=>e[19]||(e[19]=[t("mdi-calculator-variant-outline")])),_:1,__:[19]})]),e[23]||(e[23]=l("h3",{class:"empty-title"},"Siap Menghitung!",-1)),e[24]||(e[24]=l("p",{class:"empty-description"}," Lengkapi form di sebelah kiri untuk melihat simulasi harga prorate ",-1)),l("div",re,[l("div",{class:f(["checklist-item",{completed:i.value}])},[a(r,{size:"18",color:i.value?"success":"grey"},{default:s(()=>[t(u(i.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[20]||(e[20]=l("span",null,"Pilih Brand",-1))],2),l("div",{class:f(["checklist-item",{completed:o.value}])},[a(r,{size:"18",color:o.value?"success":"grey"},{default:s(()=>[t(u(o.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[21]||(e[21]=l("span",null,"Pilih Paket Layanan",-1))],2),l("div",{class:f(["checklist-item",{completed:c.value}])},[a(r,{size:"18",color:c.value?"success":"grey"},{default:s(()=>[t(u(c.value?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),e[22]||(e[22]=l("span",null,"Pilih Tanggal Mulai",-1))],2)])]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Fe=E(Le,[["__scopeId","data-v-eef0fd20"]]);export{Fe as default};
