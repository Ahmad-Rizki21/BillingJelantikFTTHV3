import{d as oe,u as se,c as F,r as v,o as ne,b as w,w as a,a as P,e as i,f as s,g as t,j as _,i as H,h as o,v as ie,t as u,F as de,k as re,B as ue,C as me,l as m,_ as ce}from"./index-DDZ3D2Zd.js";const ve={class:"page-header"},_e={key:0},fe={key:0,class:"table-container"},pe={key:1,class:"text-medium-emphasis"},ge={class:"date-column"},be={class:"date-primary"},ke={class:"date-secondary"},ye={class:"action-buttons"},xe={key:1,class:"mobile-cards-container"},Ve={key:1,class:"empty-state"},we={class:"mobile-card-header"},Ce={class:"mobile-item-title"},ze={class:"mobile-badges"},Ke={class:"mobile-meta"},De={class:"meta-text"},Te={class:"mobile-actions"},Pe={class:"form-section"},Se={class:"form-section"},Be={class:"d-flex align-center"},Me={class:"form-section"},je={key:0,class:"form-section"},Ie={class:"delete-message"},$e={class:"font-weight-bold"},He={class:"text-caption text-medium-emphasis"},Ue=oe({__name:"SKManagementView",setup(Le){const{mobile:R}=se(),f=F(()=>R.value),p=v([]),C=v(!0),z=v(!1),K=v(!1),S=v(!1),B=v(!1),k=v(-1),r=v({}),g=v(null),O=F(()=>k.value===-1?"Tambah Konten Baru":"Edit Konten"),h=[{title:"Judul",key:"judul",sortable:!0,width:"35%"},{title:"Tipe",key:"tipe",sortable:!0,width:"15%"},{title:"Versi",key:"versi",sortable:!1,width:"12%"},{title:"Dibuat Pada",key:"created_at",sortable:!0,width:"23%"},{title:"Actions",key:"actions",sortable:!1,width:"15%",align:"center"}];async function M(){C.value=!0;try{const n=await P.get("/sk/");p.value=n.data}catch(n){console.error("Gagal mengambil data S&K:",n)}finally{C.value=!1}}function j(n){k.value=n?p.value.indexOf(n):-1,r.value=n?{...n}:{tipe:"Ketentuan"},z.value=!0}function I(){z.value=!1,r.value={},k.value=-1}async function q(){S.value=!0;try{k.value>-1?await P.patch(`/sk/${r.value.id}`,r.value):await P.post("/sk/",r.value),M(),I()}catch(n){console.error("Gagal menyimpan item S&K:",n)}finally{S.value=!1}}function U(n){g.value=n,K.value=!0}function L(){K.value=!1,g.value=null}async function Q(){if(g.value){B.value=!0;try{await P.delete(`/sk/${g.value.id}`),M(),L()}catch(n){console.error("Gagal menghapus item S&K:",n)}finally{B.value=!1}}}function E(n){return new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})}function W(n){return new Date(n).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}return ne(M),(n,e)=>{const d=i("v-icon"),c=i("v-btn"),D=i("v-spacer"),y=i("v-chip"),$=i("v-card-title"),N=i("v-tooltip"),X=i("v-data-table"),Y=i("v-progress-circular"),x=i("v-card-text"),b=i("v-card"),T=i("v-divider"),A=i("v-text-field"),Z=i("v-textarea"),ee=i("v-list-item"),te=i("v-select"),ae=i("v-form"),G=i("v-card-actions"),J=i("v-dialog"),le=i("v-container");return m(),w(le,{fluid:"",class:"modern-container"},{default:a(()=>[s("div",ve,[e[8]||(e[8]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"Manajemen S&K dan Catatan Rilis"),s("p",{class:"page-subtitle"},"Kelola syarat & ketentuan dan rilis update sistem")],-1)),t(c,{color:"primary",class:ie(["add-btn",{"btn-mobile":f.value}]),size:"large",onClick:e[0]||(e[0]=l=>j())},{default:a(()=>[t(d,{left:""},{default:a(()=>e[7]||(e[7]=[o("mdi-plus")])),_:1,__:[7]}),f.value?H("",!0):(m(),_("span",_e,"Tambah Konten"))]),_:1},8,["class"])]),t(b,{class:"content-card",elevation:"0"},{default:a(()=>[t($,{class:"card-header"},{default:a(()=>[t(d,{class:"header-icon",color:"primary"},{default:a(()=>e[9]||(e[9]=[o("mdi-file-document-multiple-outline")])),_:1,__:[9]}),e[10]||(e[10]=o(" Daftar Konten ")),t(D),t(y,{class:"items-count-chip",size:"small",variant:"tonal"},{default:a(()=>[o(u(p.value.length)+" item ",1)]),_:1})]),_:1,__:[10]}),f.value?(m(),_("div",xe,[C.value?(m(),w(Y,{key:0,indeterminate:"",color:"primary",class:"loading-spinner"})):p.value.length===0?(m(),_("div",Ve,[t(d,{size:"64",color:"grey-lighten-1"},{default:a(()=>e[15]||(e[15]=[o("mdi-file-document-outline")])),_:1,__:[15]}),e[16]||(e[16]=s("p",{class:"text-medium-emphasis mt-4"},"Belum ada konten tersedia",-1))])):(m(!0),_(de,{key:2},re(p.value,l=>(m(),w(b,{key:l.id,class:"mobile-item-card",elevation:"1"},{default:a(()=>[t(x,{class:"mobile-card-content"},{default:a(()=>[s("div",we,[s("h3",Ce,u(l.judul),1),s("div",ze,[t(y,{color:l.tipe==="Pembaruan"?"success":"primary",size:"small",variant:"tonal"},{default:a(()=>[o(u(l.tipe),1)]),_:2},1032,["color"]),l.versi?(m(),w(y,{key:0,color:"info",size:"small",variant:"outlined"},{default:a(()=>[o(u(l.versi),1)]),_:2},1024)):H("",!0)])]),s("div",Ke,[t(d,{size:"14",class:"meta-icon"},{default:a(()=>e[17]||(e[17]=[o("mdi-calendar")])),_:1,__:[17]}),s("span",De,u(E(l.created_at)),1)]),s("div",Te,[t(c,{variant:"outlined",color:"primary",size:"small",onClick:V=>j(l)},{default:a(()=>[t(d,{left:"",size:"16"},{default:a(()=>e[18]||(e[18]=[o("mdi-pencil")])),_:1,__:[18]}),e[19]||(e[19]=o(" Edit "))]),_:2,__:[19]},1032,["onClick"]),t(c,{variant:"outlined",color:"error",size:"small",onClick:V=>U(l)},{default:a(()=>[t(d,{left:"",size:"16"},{default:a(()=>e[20]||(e[20]=[o("mdi-delete")])),_:1,__:[20]}),e[21]||(e[21]=o(" Hapus "))]),_:2,__:[21]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])):(m(),_("div",fe,[t(X,{headers:h,items:p.value,loading:C.value,class:"modern-table","items-per-page":10,"loading-text":"Memuat data...","no-data-text":"Belum ada konten tersedia"},{"item.tipe":a(({item:l})=>[t(y,{color:l.tipe==="Pembaruan"?"success":"primary",size:"small",variant:"tonal",class:"type-chip"},{default:a(()=>[t(d,{left:"",size:"small"},{default:a(()=>[o(u(l.tipe==="Pembaruan"?"mdi-update":"mdi-file-document-outline"),1)]),_:2},1024),o(" "+u(l.tipe),1)]),_:2},1032,["color"])]),"item.versi":a(({item:l})=>[l.versi?(m(),w(y,{key:0,color:"info",size:"small",variant:"outlined",class:"version-chip"},{default:a(()=>[o(u(l.versi),1)]),_:2},1024)):(m(),_("span",pe,"-"))]),"item.created_at":a(({item:l})=>[s("div",ge,[s("div",be,u(E(l.created_at)),1),s("div",ke,u(W(l.created_at)),1)])]),"item.actions":a(({item:l})=>[s("div",ye,[t(c,{icon:"",size:"small",variant:"text",color:"primary",class:"action-btn",onClick:V=>j(l)},{default:a(()=>[t(d,{size:"18"},{default:a(()=>e[11]||(e[11]=[o("mdi-pencil")])),_:1,__:[11]}),t(N,{activator:"parent",location:"top"},{default:a(()=>e[12]||(e[12]=[o("Edit")])),_:1,__:[12]})]),_:2},1032,["onClick"]),t(c,{icon:"",size:"small",variant:"text",color:"error",class:"action-btn",onClick:V=>U(l)},{default:a(()=>[t(d,{size:"18"},{default:a(()=>e[13]||(e[13]=[o("mdi-delete")])),_:1,__:[13]}),t(N,{activator:"parent",location:"top"},{default:a(()=>e[14]||(e[14]=[o("Hapus")])),_:1,__:[14]})]),_:2},1032,["onClick"])])]),_:1},8,["items","loading"])]))]),_:1}),t(J,{modelValue:z.value,"onUpdate:modelValue":e[5]||(e[5]=l=>z.value=l),"max-width":f.value?"95vw":"700px",persistent:"",fullscreen:f.value},{default:a(()=>[t(b,{class:"dialog-card"},{default:a(()=>[t($,{class:"dialog-header"},{default:a(()=>[t(d,{left:"",color:"primary"},{default:a(()=>[o(u(k.value===-1?"mdi-plus-circle":"mdi-pencil-circle"),1)]),_:1}),o(" "+u(O.value)+" ",1),t(D),t(c,{icon:"",variant:"text",size:"small",onClick:I,class:"close-btn"},{default:a(()=>[t(d,null,{default:a(()=>e[22]||(e[22]=[o("mdi-close")])),_:1,__:[22]})]),_:1})]),_:1}),t(T),t(x,{class:"dialog-content"},{default:a(()=>[t(ae,{ref:"form",class:"form-container"},{default:a(()=>[s("div",Pe,[e[23]||(e[23]=s("label",{class:"form-label"},"Judul Konten",-1)),t(A,{modelValue:r.value.judul,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.judul=l),placeholder:"Masukkan judul konten...",variant:"outlined",density:"comfortable",class:"form-field",rules:[l=>!!l||"Judul harus diisi"]},null,8,["modelValue","rules"])]),s("div",Se,[e[26]||(e[26]=s("label",{class:"form-label"},"Konten",-1)),t(Z,{modelValue:r.value.konten,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.konten=l),placeholder:"Masukkan konten (mendukung HTML dasar)...",variant:"outlined",rows:"6",class:"form-field",rules:[l=>!!l||"Konten harus diisi"]},null,8,["modelValue","rules"]),t(b,{variant:"tonal",color:"info",class:"mt-2"},{default:a(()=>[t(x,{class:"pa-3"},{default:a(()=>[s("div",Be,[t(d,{left:"",size:"18",color:"info"},{default:a(()=>e[24]||(e[24]=[o("mdi-information")])),_:1,__:[24]}),e[25]||(e[25]=s("span",{class:"text-caption"},"Anda dapat menggunakan tag HTML dasar seperti <strong>, <em>, <p>, <br>",-1))])]),_:1})]),_:1})]),s("div",Me,[e[27]||(e[27]=s("label",{class:"form-label"},"Tipe Konten",-1)),t(te,{modelValue:r.value.tipe,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.tipe=l),items:["Ketentuan","Pembaruan"],variant:"outlined",density:"comfortable",class:"form-field",rules:[l=>!!l||"Tipe harus dipilih"]},{item:a(({props:l,item:V})=>[t(ee,ue(me(l)),{prepend:a(()=>[t(d,null,{default:a(()=>[o(u(V.value==="Pembaruan"?"mdi-update":"mdi-file-document-outline"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","rules"])]),r.value.tipe==="Pembaruan"?(m(),_("div",je,[e[29]||(e[29]=s("label",{class:"form-label"},"Versi",-1)),t(A,{modelValue:r.value.versi,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.versi=l),placeholder:"contoh: v2.1.0",variant:"outlined",density:"comfortable",class:"form-field",rules:r.value.tipe==="Pembaruan"?[l=>!!l||"Versi harus diisi untuk tipe Pembaruan"]:[]},{"prepend-inner":a(()=>[t(d,{size:"18",color:"info"},{default:a(()=>e[28]||(e[28]=[o("mdi-tag")])),_:1,__:[28]})]),_:1},8,["modelValue","rules"])])):H("",!0)]),_:1},512)]),_:1}),t(T),t(G,{class:"dialog-actions"},{default:a(()=>[t(D),t(c,{variant:"text",onClick:I,class:"cancel-btn"},{default:a(()=>e[30]||(e[30]=[o(" Batal ")])),_:1,__:[30]}),t(c,{color:"primary",variant:"elevated",onClick:q,loading:S.value,class:"save-btn"},{default:a(()=>[t(d,{left:""},{default:a(()=>e[31]||(e[31]=[o("mdi-content-save")])),_:1,__:[31]}),e[32]||(e[32]=o(" Simpan "))]),_:1,__:[32]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","max-width","fullscreen"]),t(J,{modelValue:K.value,"onUpdate:modelValue":e[6]||(e[6]=l=>K.value=l),"max-width":f.value?"95vw":"500px"},{default:a(()=>[t(b,{class:"delete-dialog"},{default:a(()=>[t($,{class:"delete-header"},{default:a(()=>[t(d,{left:"",color:"error"},{default:a(()=>e[33]||(e[33]=[o("mdi-alert-circle")])),_:1,__:[33]}),e[34]||(e[34]=o(" Konfirmasi Hapus "))]),_:1,__:[34]}),t(T),t(x,{class:"delete-content"},{default:a(()=>[s("div",Ie,[e[35]||(e[35]=s("p",null,"Anda yakin ingin menghapus konten ini?",-1)),t(b,{variant:"tonal",color:"error",class:"mt-4"},{default:a(()=>[t(x,{class:"pa-3"},{default:a(()=>[s("div",$e,u(g.value?.judul),1),s("div",He,u(g.value?.tipe),1)]),_:1})]),_:1})])]),_:1}),t(T),t(G,{class:"delete-actions"},{default:a(()=>[t(D),t(c,{variant:"text",onClick:L},{default:a(()=>e[36]||(e[36]=[o(" Batal ")])),_:1,__:[36]}),t(c,{color:"error",variant:"elevated",onClick:Q,loading:B.value},{default:a(()=>[t(d,{left:""},{default:a(()=>e[37]||(e[37]=[o("mdi-delete")])),_:1,__:[37]}),e[38]||(e[38]=o(" Hapus "))]),_:1,__:[38]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"])]),_:1})}}}),Ne=ce(Ue,[["__scopeId","data-v-bea982ee"]]);export{Ne as default};
